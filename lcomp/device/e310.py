#! /usr/bin/env python
# -*- coding: utf-8 -*-


# номера доступных пользовательских запросов для USB (vendor request)
V_PUT_ARRAY_E310 = 0x1
V_GET_ARRAY_E310 = 0x2
V_START_ADC_E310 = 0x4
V_STOP_ADC_E310  = 0x5
V_CALL_APP_E310  = 0xF

CONTROL_BITS_ADDR_REG             = 0x0
NUMBER_OF_INCREMENTS_ADDR_REG     = 0x1 << 12
LO_DELTA_FREQUENCY_ADDR_REG       = 0x2 << 12
HI_DELTA_FREQUENCY_ADDR_REG       = 0x3 << 12
CYCLE_INCREMENT_INTERVAL_ADDR_REG = (0x4 >> 1) << 13
CLOCK_INCREMENT_INTERVAL_ADDR_REG = (0x6 >> 1) << 13
LO_START_FREQUENCY_ADDR_REG       = 0xC << 12
HI_START_FREQUENCY_ADDR_REG       = 0xD << 12

INTERNAL_DDS_MASTER_CLOCK = 50000.0
ADC_INPUT_RANGE           = 3.3
MAX_FREQ_DDS_CODE         = 0x1 << 24

DDS_CTRL_PRESET = 0x08D3

# тип приращений и скорость
MCLOCK_INCREMENT = CLOCK_INCREMENT_INTERVAL_ADDR_REG
OUTWAV_INCREMENT = CYCLE_INCREMENT_INTERVAL_ADDR_REG

# умножитель
INC_INTERVAL_MULT_1   = 0x0 << 11
INC_INTERVAL_MULT_5   = 0x1 << 11
INC_INTERVAL_MULT_100 = 0x2 << 11
INC_INTERVAL_MULT_500 = 0x3 << 11

NO_CYCLIC_SCAN = 0x00
SAWTOOTH_SCAN  = 0x01
TRIANGLE_SCAN  = 0x02

# CtrlReg DDS Gain defs
GG_P10dB = 0x30
GG_P06dB = 0x20
GG_P04dB = 0x70
GG_P03dB = 0x10
GG_P00dB = 0x00
GG_M02dB = 0xB0
GG_M03dB = 0x50
GG_M06dB = 0xA0
GG_M09dB = 0x90
GG_M12dB = 0x80
GG_M14dB = 0xF0
GG_M18dB = 0xE0
GG_M21dB = 0xD0
GG_M24dB = 0xC0

# CtrlReg DDS 10Ohm out offset source
BIT_10OHM_OFFSET = 3
INT_10OHM_OFFSET = 0x00
EXT_10OHM_OFFSET = 0x08

# CtrlReg DDS MasterClock source
BIT_MCLK_LINE = 2
INT_MCLK_LINE = 0x00
EXT_MCLK_LINE = 0x04

# CtrlReg DDS Interrupt source
BIT_INTR_LINE = 1
INT_IRQ_LINE  = 0x00
EXT_IRQ_LINE  = 0x02

# CtrlReg DDS Ctrl source
BIT_CTRL_LINE = 0
INT_CTRL_LINE = 0
EXT_CTRL_LINE = 1

# DDS_CtrlReg bits
BIT_MSBOUTEN = 8

BIT_SIN_OR_TRI = 9
TRI_WAVE       = 0
SIN_WAVE       = 1

BIT_INT_OR_EXT_INCR = 5
AUTO_INCREMENT      = 0
CTRL_INCREMENT      = 1

BIT_SYNCOUTEN = 2

BIT_SYNCSEL   = 3
SYNC_EACH_INC = 0
SYNC_EOS      = 1

BOOT_LOADER_START_ADDRESS_E310      = 0x00000000    # условный адрес режима 'Загрузчика' (BootLoader)
BOOT_LOADER_DESCRIPTOR_ADDRESS_E310 = 0x00102E00
MODULE_DESCRIPTOR_ADDRESS_E310      = 0x00103000
USER_FLASH_ADDRESS_E310             = 0x00103100
FIRMWARE_DESCRIPTOR_ADDRESS_E310    = 0x00103300
FIRMWARE_START_ADDRESS_E310         = 0x00103500

MODULE_PARS_ADDRESS_E310            = 0x00201400
FM_SAMPLE_ADDRESS_E310              = 0x00201480
TTL_PARS_ADDRESS_E310               = 0x002014A0
ADC_PARS_ADDRESS_E310               = 0x002014B0
ADC_DATA_ADDRESS_E310               = 0x002014B8
